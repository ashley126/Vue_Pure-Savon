(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d57fc90e"],{"0266":function(t,s,a){},"270e":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"billinginfo"},[a("Bannerimg",[a("ProgressStep",{attrs:{current:t.step}})],1),a("div",{staticClass:"container_fix"},[a("h3",[t._v(t._s(t.$t("Billinginfo.step_title")))]),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12 col-md-5"},[a("ul",{staticClass:"order"},[t._l(t.carts.carts,(function(s){return a("li",{key:s.id,staticClass:"pb-3 orderList"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 p-0"},[a("div",{staticClass:"pro-img"},[a("img",{attrs:{src:s.product.imageUrl,alt:s.product.title}})])]),a("div",{staticClass:"col-7 p-0"},[a("div",{staticClass:"row m-0 w-100"},[a("div",{staticClass:"col-12 col-md-8"},[a("div",{staticClass:"pro-name"},[t._v(t._s(s.product.title))])]),a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"pro_qty"},[t._v("x"+t._s(s.qty))])])])]),a("div",{staticClass:"col-2 p-0"},[s.price?a("div",{staticClass:"pro_price"},[t._v("NT"+t._s(t._f("currency")(s.product.price)))]):a("div",{staticClass:"pro_price"},[t._v("NT"+t._s(t._f("currency")(s.product.origin_price)))])])])])})),a("li",{staticClass:"pt-4"},[a("div",{staticClass:"row summary"},[a("div",{staticClass:"col-6 p-0"},[t._v("共"+t._s(t.cartLength)+"項")]),a("div",{staticClass:"col-2 p-0"},[t._v(t._s(t.$t("Billinginfo.summary")))]),a("div",{staticClass:"col-3 p-0"},[t._v("NT"+t._s(t._f("currency")(t._f("floor")(t.carts.final_total))))]),a("div",{staticClass:"col-1 p-0"})])])],2),a("div",{staticClass:"my-4 coupon"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_num,expression:"coupon_num"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠代碼"},domProps:{value:t.coupon_num},on:{input:function(s){s.target.composing||(t.coupon_num=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text coupon-send",on:{click:function(s){return s.preventDefault(),t.addCouponCode(s)}}},[t._v(t._s(t.$t("Billinginfo.coupon_sub")))])])]),t.coupon_success?t._e():a("div",[a("p",{staticClass:"text-danger"},[t._v(t._s(t.$t("Billinginfo.coupon_failed")))])])])]),a("div",{staticClass:"col-12 col-md-7"},[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(s){var e=s.handleSubmit;return[a("form",{staticClass:"buyer_infos",on:{submit:function(s){return s.preventDefault(),e(t.createOrder)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-name"}},[t._v(" "+t._s(t.$t("Billinginfo.form_name"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"buyer-name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-tel"}},[t._v(" "+t._s(t.$t("Billinginfo.form_tel"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"text",id:"buyer-tel",placeholder:"請輸入電話號碼"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-email"}},[t._v("Email"),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"buyer-email",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group col-sm-6"},[a("div",[a("label",{attrs:{for:"buyer-pay"}},[t._v(t._s(t.$t("Billinginfo.form_pay")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user.payment,expression:"form.user.payment"}],staticClass:"form-control",attrs:{name:"payment",id:"buyer-pay"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.form.user,"payment",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"CVS"}},[t._v(t._s(t.$t("Billinginfo.pay_op1")))]),a("option",{attrs:{value:"CTP"}},[t._v(t._s(t.$t("Billinginfo.pay_op2")))])])])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"buyeraddress"}},[t._v(t._s(t.$t("Billinginfo.form_adr"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"buyeraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v(t._s(t.$t("Billinginfo.form_comment")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"10",rows:"3",placeholder:"歡迎輸入想對我們說的話"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),a("div",{staticClass:"sub_order"},[a("button",{staticClass:"btn-order",class:{disabled:!0===t.clicked},attrs:{type:"submit"}},[t._v(t._s(t.$t("Billinginfo.next_btn")))])])])]}}])})],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"leaveWarn",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("p",[a("i",{staticClass:"fas fa-exclamation-circle"}),t._v(t._s(t.$t("Leavemodal.notice_txt")))])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-stay",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("Leavemodal.cancel")))]),a("button",{staticClass:"btn btn-leave",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("Leavemodal.leave")))])])])])])],1)},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v("PURE SAVON")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=(a("99af"),a("4160"),a("159b"),a("faba")),i=a("c915"),n={name:"Billinginfo",data:function(){return{step:2,carts:[],cartactual:[],cartLength:0,coupon_num:"",coupon_success:!0,clicked:!1,form:{user:{name:"",email:"",tel:"",address:"",payment:"CVS"},message:""},goNext:!1}},components:{Bannerimg:o["a"],ProgressStep:i["a"]},methods:{getCart:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("ashley0126","/cart");t.$http.get(s).then((function(s){s.data.success&&(t.carts=s.data.data,t.cartactual=s.data.data.carts,t.cartLength=0,t.cartactual.forEach((function(s){t.cartLength+=s.qty})))}))},addCouponCode:function(){var t=this,s={code:t.coupon_num},a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ashley0126","/coupon");t.$http.post(a,{data:s}).then((function(s){s.data.success?(t.coupon_success=!0,t.$bus.$emit("message:push","成功套用2020週年慶優惠券","success")):t.coupon_success=!1})),t.getCart()},createOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("ashley0126","/order"),a=t.form;t.clicked=!0,t.$http.post(s,{data:a}).then((function(s){s.data.success&&(t.goNext=!0,t.$router.push("/checkout/".concat(s.data.orderId)),localStorage.removeItem("cart"),t.$bus.$emit("cart:get"))}))},removeCart:function(){var t=this;t.getCart(),t.carts.carts.forEach((function(s){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ashley0126","/cart/").concat(s.id);t.$http.delete(a).then((function(s){t.$bus.$emit("message:push",s.data.message,"success")}))}))}},beforeRouteLeave:function(t,s,a){var e=this;e.goNext?a():($("#leaveWarn").modal("show"),$(".btn-stay").on("click",(function(){a(!1)})),$(".btn-leave").on("click",(function(){e.removeCart(),a()})))},created:function(){this.getCart()}},l=n,c=(a("f09c"),a("2877")),u=Object(c["a"])(l,e,r,!1,null,"7e66825e",null);s["default"]=u.exports},"99af":function(t,s,a){"use strict";var e=a("23e7"),r=a("d039"),o=a("e8b5"),i=a("861d"),n=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),d=a("1dde"),m=a("b622"),p=a("2d00"),v=m("isConcatSpreadable"),f=9007199254740991,_="Maximum allowed index exceeded",g=p>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),C=d("concat"),h=function(t){if(!i(t))return!1;var s=t[v];return void 0!==s?!!s:o(t)},b=!g||!C;e({target:"Array",proto:!0,forced:b},{concat:function(t){var s,a,e,r,o,i=n(this),d=u(i,0),m=0;for(s=-1,e=arguments.length;s<e;s++)if(o=-1===s?i:arguments[s],h(o)){if(r=l(o.length),m+r>f)throw TypeError(_);for(a=0;a<r;a++,m++)a in o&&c(d,m,o[a])}else{if(m>=f)throw TypeError(_);c(d,m++,o)}return d.length=m,d}})},c915:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"progressStep"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:1===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step1")))])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:2===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step2")))])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:3===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step3")))])])])])])},r=[],o={name:"ProgressStep",props:["current"]},i=o,n=a("2877"),l=Object(n["a"])(i,e,r,!1,null,null,null);s["a"]=l.exports},f09c:function(t,s,a){"use strict";a("0266")},faba:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"container-fluid bannerimg"},[t._t("default")],2)])},r=[],o={name:"Bannerimg"},i=o,n=a("2877"),l=Object(n["a"])(i,e,r,!1,null,null,null);s["a"]=l.exports}}]);
//# sourceMappingURL=chunk-d57fc90e.5e9fbc07.js.map